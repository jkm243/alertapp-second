openapi: 3.0.3
info:
  title: API Mon Projet
  version: 1.0.0
  description: Documentation OpenAPI 3 pour mon API DRF.
paths:
  /api/alert/alerts/{alert_id}/delete/:
    delete:
      operationId: alert_alerts_delete_destroy
      description: Permet à un utilisateur de supprimer une alerte qu'il a créée,
        ou à un Admin de supprimer n'importe quelle alerte.
      summary: Supprimer une alerte
      parameters:
      - in: path
        name: alert_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - Alert
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: Alerte supprimée avec succès
        '403':
          description: Permission refusée
        '404':
          description: Alerte introuvable
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerError'
          description: Erreur interne du serveur
  /api/alert/alerts/{alert_id}/update/:
    put:
      operationId: alert_alerts_update_update
      description: Permet à un utilisateur de modifier une alerte qu'il a créée, ou
        à un Admin de modifier n'importe quelle alerte.
      summary: Modifier une alerte
      parameters:
      - in: path
        name: alert_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - Alert
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Alert'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Alert'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Alert'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Alert'
          description: Alerte modifiée avec succès
        '403':
          description: Permission refusée
        '404':
          description: Alerte introuvable
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerError'
          description: Erreur interne du serveur
  /api/alert/alerts/{alert_id}/validate/:
    post:
      operationId: alert_alerts_validate_create
      description: "Cette route permet à un **opérateur** de valider une alerte. Une\
        \ fois l'alerte validée, une mission est automatiquement créée, et un log\
        \ de mission est ajouté. \n\n**Permissions :** uniquement les utilisateurs\
        \ avec le rôle `Operateur`.\n\n**Effets secondaires :**\n- Met à jour le statut\
        \ de l'alerte\n- Crée une mission automatiquement\n- Ajoute un log dans l'historique\
        \ de la mission\n- Envoie une notification WebSocket au créateur de l’alerte"
      summary: Valider une alerte et créer automatiquement une mission
      parameters:
      - in: path
        name: alert_id
        schema:
          type: string
          format: uuid
        description: L'identifiant unique de l'alerte à valider.
        required: true
      tags:
      - Alert
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
              examples:
                Succès:
                  value:
                    message: Alerte validée et mission créée
                    mission_id: c23c47ab-cc9b-4d7d-8d35-f162edd3d922
          description: Alerte validée avec succès et mission créée.
        '403':
          description: L'utilisateur n'a pas le rôle requis.
        '404':
          description: Alerte introuvable.
  /api/alert/alerts/all/:
    get:
      operationId: alert_alerts_all_retrieve
      description: Retourne la liste complète des alertes créées.
      summary: Récupérer toutes les alertes
      tags:
      - Alert
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Alert'
          description: Liste des alertes récupérée avec succès
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerError'
          description: Erreur serveur
  /api/alert/alerts/create/:
    post:
      operationId: alert_alerts_create_create
      description: |-
        Créer une nouvelle alerte avec upload de plusieurs fichiers.

        **Content-Type : multipart/form-data**
        Envoyer les fichiers avec le champ `medias` (un ou plusieurs fichiers).
      summary: Créer une alerte
      tags:
      - Alert
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateAlertRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CreateAlertRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Alert'
          description: Alerte créée
        '400':
          description: Erreur de validation
        '500':
          description: Erreur serveur
  /api/alert/alerts/my-alerts/:
    get:
      operationId: alert_alerts_my_alerts_retrieve
      description: Retourne toutes les alertes créées par l'utilisateur actuellement
        connecté.
      summary: Lister les alertes de l'utilisateur connecté
      tags:
      - Alert
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Alert'
          description: Liste des alertes récupérées avec succès
        '401':
          description: Non authentifié
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerError'
          description: Erreur interne du serveur
  /api/alert/typealerts/:
    get:
      operationId: alert_typealerts_retrieve
      description: Retourne la liste complète des types d’alerte disponibles dans
        le système.
      summary: Lister tous les types d’alerte
      tags:
      - Type Alert
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TypeAlert'
          description: Liste récupérée avec succès
  /api/alert/typealerts/{id}/:
    get:
      operationId: alert_typealerts_retrieve_2
      description: Récupère les informations détaillées d’un type d’alerte en fonction
        de son UUID.
      summary: Afficher un type d’alerte
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - Type Alert
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TypeAlert'
          description: Type d’alerte trouvé avec succès
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TypeAlertNotFound'
          description: Type d’alerte non trouvé
  /api/alert/typealerts/{id}/delete/:
    delete:
      operationId: alert_typealerts_delete_destroy
      description: Supprime définitivement un type d’alerte à partir de son UUID.
      summary: Supprimer un type d’alerte
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - Type Alert
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '204':
          description: Type d’alerte supprimé avec succès
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TypeAlertNotFound'
          description: Type d’alerte non trouvé
  /api/alert/typealerts/{id}/update/:
    put:
      operationId: alert_typealerts_update_update
      description: Permet de modifier les informations d’un type d’alerte existant.
      summary: Mettre à jour un type d’alerte
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - Type Alert
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TypeAlert'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TypeAlert'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TypeAlert'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TypeAlert'
          description: Type d’alerte mis à jour avec succès
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TypeAlertUpdateError'
          description: Erreur de validation
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TypeAlertNotFound'
          description: Type d’alerte non trouvé
    patch:
      operationId: alert_typealerts_update_partial_update
      description: Permet de modifier les informations d’un type d’alerte existant.
      summary: Mettre à jour un type d’alerte
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - Type Alert
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedTypeAlert'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedTypeAlert'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedTypeAlert'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TypeAlert'
          description: Type d’alerte mis à jour avec succès
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TypeAlertUpdateError'
          description: Erreur de validation
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TypeAlertNotFound'
          description: Type d’alerte non trouvé
  /api/alert/typealerts/create/:
    post:
      operationId: alert_typealerts_create_create
      description: Permet de créer un nouveau type d’alerte avec un nom, une description
        et un slug.
      summary: Créer un type d’alerte
      tags:
      - Type Alert
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TypeAlert'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TypeAlert'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TypeAlert'
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TypeAlert'
              examples:
                ExempleDeSuccès:
                  value:
                    id: uuid-typealert
                    name: Incident électrique
                    description: Alerte concernant une panne de courant
                    slug: incident-electrique
                  summary: Exemple de succès
          description: Type d’alerte créé avec succès
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TypeAlertCreateError'
          description: Erreur de validation
  /api/logs/missions/{mission_id}/finish/:
    get:
      operationId: logs_missions_finish_retrieve
      description: Cette route retourne la liste complète des journaux (logs) associés
        à une mission. Chaque entrée contient l'utilisateur, le message et la date
        de création du log.
      summary: Récupérer les journaux d’une mission
      parameters:
      - in: path
        name: mission_id
        schema:
          type: string
        description: Identifiant UUID de la mission
        required: true
      tags:
      - logs
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          description: Liste des logs de la mission
        '403':
          description: Permission refusée
        '404':
          description: Mission introuvable
  /api/missions/missions/{mission_id}/finish/:
    post:
      operationId: missions_missions_finish_create
      description: "Cette route permet à l’opérateur assigné de marquer une mission\
        \ comme terminée. \n\n**Permissions :** uniquement l'opérateur associé à la\
        \ mission.\n\n**Effets :**\n- Met à jour le statut de la mission en `terminee`\n\
        - Enregistre la date de fin\n-Ajoute un log dans l'historique\n- Envoie (optionnel)\
        \ une notification WebSocket au créateur de l’alerte"
      summary: Terminer une mission
      parameters:
      - in: path
        name: mission_id
        schema:
          type: string
          format: uuid
        description: Identifiant unique de la mission à terminer.
        required: true
      tags:
      - Missions
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          description: Mission terminée avec succès.
        '403':
          description: L'utilisateur n'est pas l'opérateur assigné.
        '404':
          description: Mission introuvable.
  /api/notifications/unread_count/:
    get:
      operationId: notifications_unread_count_retrieve
      tags:
      - notifications
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          description: No response body
  /api/users/account/refresh/:
    post:
      operationId: users_account_refresh_create
      description: |-
        Takes a refresh type JSON web token and returns an access type JSON web
        token if the refresh token is valid.
      tags:
      - User
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRefresh'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenRefresh'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenRefresh'
        required: true
      security:
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenRefresh'
          description: ''
  /api/users/activate/{uidb64}/{token}/:
    get:
      operationId: users_activate_retrieve
      description: |-
        Active un compte utilisateur en utilisant le lien envoyé par email.

        Le lien contient un `uidb64` et un `token`.
        Si le lien est valide, le compte devient actif (`is_active=True`).
      summary: Activation d'un compte utilisateur
      parameters:
      - in: path
        name: token
        schema:
          type: string
        required: true
      - in: path
        name: uidb64
        schema:
          type: string
        required: true
      tags:
      - User
      security:
      - BearerAuth: []
      responses:
        '200':
          description: Compte activé avec succès
        '400':
          description: Lien d'activation invalide
  /api/users/all/:
    get:
      operationId: users_all_retrieve
      description: Retourne la liste de tous les utilisateurs. Accessible uniquement
        par les admins.
      summary: Récupérer tous les utilisateurs
      tags:
      - User
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
          description: Liste des utilisateurs récupérée avec succès
        '403':
          description: Permission refusée
  /api/users/change-password/:
    post:
      operationId: users_change_password_create
      description: Permet à l'utilisateur connecté de changer son mot de passe. Doit
        fournir l'ancien mot de passe et le nouveau mot de passe.
      summary: Changer le mot de passe d'un utilisateur
      tags:
      - User
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - old_password
              - new_password
              - confirm_password
              properties:
                old_password:
                  type: string
                  description: Mot de passe actuel
                new_password:
                  type: string
                  description: Nouveau mot de passe
                confirm_password:
                  type: string
                  description: Confirmation du nouveau mot de passe
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          description: Mot de passe changé avec succès
        '400':
          description: Erreur de validation
        '401':
          description: Utilisateur non authentifié
  /api/users/deactivate-activate/:
    put:
      operationId: users_deactivate_activate_update
      description: Bascule le statut d'activation d'un utilisateur. Si l'utilisateur
        est actif, il sera désactivé, sinon il sera activé. Accessible uniquement
        par les Admins.
      summary: Activer / Désactiver un utilisateur
      tags:
      - User
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          description: Statut de l'utilisateur modifié
        '404':
          description: Utilisateur non trouvé
        '403':
          description: Permission refusée
  /api/users/delete/{user_id}/:
    delete:
      operationId: users_delete_destroy
      description: Supprime un utilisateur existant par son ID. Accessible uniquement
        par les Admins.
      summary: Supprimer un utilisateur
      parameters:
      - in: path
        name: user_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - User
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          description: Utilisateur supprimé avec succès
        '404':
          description: Utilisateur non trouvé
        '403':
          description: Permission refusée
  /api/users/edit-profile/:
    post:
      operationId: users_edit_profile_create
      description: 'Permet à un utilisateur authentifié de mettre à jour son profil.
        Les champs modifiables sont : `email`, `lastname`, `firstname`, `middlename`,
        `telephone` et `avatar`.'
      summary: Modifier le profil utilisateur
      tags:
      - User
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  example: john.doe@example.com
                lastname:
                  type: string
                  example: Doe
                firstname:
                  type: string
                  example: John
                middlename:
                  type: string
                  example: Junior
                telephone:
                  type: string
                  example: '+243970000000'
                avatar:
                  type: string
                  format: binary
              required: []
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
              examples:
                ProfilMisÀJour:
                  value:
                    id: 6d5f90d0-17e5-4d9f-912e-42f781c59a1a
                    email: john.doe@example.com
                    lastname: Doe
                    firstname: John
                    middlename: Junior
                    telephone: '+243970000000'
                    get_avatar: https://exemple.com/media/avatars/avatar.jpg
                  summary: Mise à jour réussie
          description: ''
        '400':
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: 'email: Ce champ est obligatoire | telephone: Format
                      invalide'
          description: ''
  /api/users/google-login/:
    post:
      operationId: users_google_login_create
      description: Permet de créer ou connecter un utilisateur via son token Google
        ID.
      summary: Connexion/Inscription via Google
      tags:
      - User
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GoogleLoginRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/GoogleLoginRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/GoogleLoginRequest'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GoogleLoginSuccess'
          description: Connexion/Inscription réussie
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GoogleLoginError'
          description: Erreur lors de la vérification du token Google
  /api/users/login/:
    post:
      operationId: users_login_create
      description: Authenticate user and return a JWT **access** and **refresh** token
        pair, plus user info.
      summary: Login via email & password (JWT)
      tags:
      - User
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - email
              - password
              properties:
                email:
                  type: string
                  format: email
                  description: User email
                password:
                  type: string
                  description: User password
              additionalProperties: false
      security:
      - jwtAuth: []
      - BearerAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginSuccess'
              examples:
                Example200:
                  value:
                    token:
                      refresh: eyJhbGciOiJIUzI1NiIsInR...
                      access: eyJhbGciOiJIUzI1NiIsInR...
                    user:
                      id: user-id-or-uuid
                      email: user@example.com
                      name: John Doe
                  summary: Example 200
          description: Successful login
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginError'
              examples:
                Example401:
                  value:
                    message: Invalid email or password
                  summary: Example 401
          description: Invalid email or password
  /api/users/me/:
    get:
      operationId: users_me_retrieve
      description: Permet de récupérer les informations de l'utilisateur actuellement
        connecté via le token JWT.
      summary: Renvoie l'utilisateur connecté
      tags:
      - User
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          description: No response body
  /api/users/pagination/:
    get:
      operationId: users_pagination_retrieve
      description: Retourne une liste paginée des utilisateurs. Accessible uniquement
        par les Admins. Paramètre optionnel 'search' pour filtrer par email, firstname
        ou lastname.
      summary: Récupérer les utilisateurs avec pagination et filtre
      parameters:
      - in: query
        name: page
        schema:
          type: integer
        description: Numéro de la page
      - in: query
        name: page_size
        schema:
          type: integer
        description: Nombre d'éléments par page
      - in: query
        name: search
        schema:
          type: string
        description: Texte à rechercher dans email, firstname ou lastname
      tags:
      - User
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserPagination'
          description: Liste paginée des utilisateurs
        '403':
          description: Permission refusée
  /api/users/reset-password/:
    post:
      operationId: users_reset_password_create
      description: Permet à un utilisateur de recevoir un lien de réinitialisation
        de mot de passe par email.
      summary: Demande de réinitialisation du mot de passe
      tags:
      - User
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - email
              properties:
                email:
                  type: string
                  description: Adresse email de l'utilisateur
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          description: Email envoyé si l'utilisateur existe
        '400':
          description: Erreur de validation
  /api/users/reset-password-confirm/:
    post:
      operationId: users_reset_password_confirm_create
      description: Permet de définir un nouveau mot de passe après avoir reçu un lien
        de réinitialisation.
      summary: Réinitialiser le mot de passe avec un token valide
      tags:
      - User
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - uid
              - token
              - new_password
              - confirm_password
              properties:
                uid:
                  type: integer
                  description: ID de l'utilisateur
                token:
                  type: string
                  description: Token de réinitialisation
                new_password:
                  type: string
                  description: Nouveau mot de passe
                confirm_password:
                  type: string
                  description: Confirmation du nouveau mot de passe
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          description: Mot de passe réinitialisé avec succès
        '400':
          description: Token invalide ou expiré
  /api/users/signup/:
    post:
      operationId: users_signup_create
      description: Permet de créer un nouvel utilisateur inactif et d’envoyer un lien
        d’activation par e-mail. L’utilisateur doit cliquer sur le lien pour activer
        son compte.
      summary: Inscription d’un nouvel utilisateur
      tags:
      - User
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignupRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SignupRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SignupRequest'
        required: true
      security:
      - BearerAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SignupSuccess'
          description: Utilisateur créé avec succès. Email envoyé.
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SignupError'
          description: Erreur de validation.
  /api/users/update/:
    put:
      operationId: users_update_update
      description: Permet à l'utilisateur connecté de modifier ses informations personnelles.
      summary: Mettre à jour le profil utilisateur
      tags:
      - User
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/User'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/User'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
              examples:
                Réponse200:
                  value:
                    id: uuid-user
                    email: user@example.com
                    role: User
                    firstname: Alice
                    lastname: Doe
                    middlename: M.
                    telephone: '+243970000000'
                    is_active: true
                  summary: Réponse 200
          description: Utilisateur mis à jour avec succès
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateError'
          description: Erreur de validation
        '401':
          description: Non authentifié
  /api/users/update-by-id/{user_id}/:
    put:
      operationId: users_update_by_id_update
      description: Permet à un administrateur de modifier les informations d'un utilisateur
        spécifique.
      summary: Mettre à jour un utilisateur par ID
      parameters:
      - in: path
        name: user_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - User
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/User'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/User'
        required: true
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: Utilisateur mis à jour avec succès
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateError'
          description: Erreur de validation
        '401':
          description: Non authentifié
        '403':
          description: Permission refusée
        '404':
          description: Utilisateur non trouvé
  /api/users/user/{user_id}/:
    get:
      operationId: users_user_retrieve
      description: Retourne les informations d'un utilisateur identifié par son UUID.
      summary: Récupérer un utilisateur par son ID
      parameters:
      - in: path
        name: user_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - User
      security:
      - jwtAuth: []
      - BearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: Utilisateur récupéré avec succès
        '404':
          description: Utilisateur non trouvé
        '403':
          description: Permission refusée
components:
  schemas:
    Alert:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        type:
          $ref: '#/components/schemas/TypeAlert'
        user:
          allOf:
          - $ref: '#/components/schemas/User'
          readOnly: true
        description:
          type: string
          nullable: true
          maxLength: 255
        latitude:
          type: number
          format: double
          nullable: true
        longitude:
          type: number
          format: double
          nullable: true
        status:
          $ref: '#/components/schemas/StatusEnum'
        created_at:
          type: string
          format: date-time
          readOnly: true
        medias:
          type: array
          items:
            $ref: '#/components/schemas/AlertMedia'
          readOnly: true
      required:
      - created_at
      - id
      - medias
      - type
      - user
    AlertMedia:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        file:
          type: string
          format: uri
        uploaded_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - file
      - id
      - uploaded_at
    CreateAlertRequest:
      type: object
      properties:
        type:
          type: string
          format: uuid
        description:
          type: string
        latitude:
          type: number
          format: double
        longitude:
          type: number
          format: double
        medias:
          type: array
          items:
            type: string
            format: uri
          description: Liste de fichiers (upload multiple)
      required:
      - description
      - type
    GoogleLoginError:
      type: object
      properties:
        message:
          type: string
      required:
      - message
    GoogleLoginRequest:
      type: object
      properties:
        id_token:
          type: string
      required:
      - id_token
    GoogleLoginSuccess:
      type: object
      properties:
        message:
          type: string
        access:
          type: string
        refresh:
          type: string
        user:
          $ref: '#/components/schemas/User'
      required:
      - access
      - message
      - refresh
      - user
    LoginError:
      type: object
      properties:
        message:
          type: string
          default: Invalid email or password
    LoginSuccess:
      type: object
      properties:
        token:
          $ref: '#/components/schemas/TokenPair'
        user:
          $ref: '#/components/schemas/User'
      required:
      - token
      - user
    PatchedTypeAlert:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
          nullable: true
          maxLength: 255
        description:
          type: string
          nullable: true
          maxLength: 255
        slug:
          type: string
          nullable: true
          maxLength: 255
    RoleEnum:
      enum:
      - Admin
      - Operator
      - User
      type: string
      description: |-
        * `Admin` - Admin
        * `Operator` - Operator
        * `User` - User
    ServerError:
      type: object
      properties:
        message:
          type: string
      required:
      - message
    SignupError:
      type: object
      properties:
        message:
          type: string
      required:
      - message
    SignupRequest:
      type: object
      properties:
        email:
          type: string
          format: email
        password1:
          type: string
        password2:
          type: string
        lastname:
          type: string
        firstname:
          type: string
        middlename:
          type: string
        telephone:
          type: string
        role:
          $ref: '#/components/schemas/RoleEnum'
      required:
      - email
      - password1
      - password2
    SignupSuccess:
      type: object
      properties:
        message:
          type: string
      required:
      - message
    StatusEnum:
      enum:
      - New
      - Validated
      - Rejected
      - In Progress
      - Resolved
      - Closed
      type: string
      description: |-
        * `New` - New
        * `Validated` - Validated
        * `Rejected` - Rejected
        * `In Progress` - In Progress
        * `Resolved` - Resolved
        * `Closed` - Closed
    TokenPair:
      type: object
      properties:
        refresh:
          type: string
          description: Refresh token
        access:
          type: string
          description: Access token
      required:
      - access
      - refresh
    TokenRefresh:
      type: object
      properties:
        access:
          type: string
          readOnly: true
        refresh:
          type: string
          writeOnly: true
      required:
      - access
      - refresh
    TypeAlert:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
          nullable: true
          maxLength: 255
        description:
          type: string
          nullable: true
          maxLength: 255
        slug:
          type: string
          nullable: true
          maxLength: 255
      required:
      - id
    TypeAlertCreateError:
      type: object
      properties:
        message:
          type: string
      required:
      - message
    TypeAlertNotFound:
      type: object
      properties:
        message:
          type: string
      required:
      - message
    TypeAlertUpdateError:
      type: object
      properties:
        message:
          type: string
      required:
      - message
    UpdateError:
      type: object
      properties:
        message:
          type: string
      required:
      - message
    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        email:
          type: string
          format: email
          maxLength: 191
        role:
          $ref: '#/components/schemas/RoleEnum'
        firstname:
          type: string
          nullable: true
          maxLength: 255
        lastname:
          type: string
          nullable: true
          maxLength: 255
        middlename:
          type: string
          nullable: true
          maxLength: 255
        telephone:
          type: string
          nullable: true
          maxLength: 255
        get_avatar:
          type: string
          readOnly: true
        is_active:
          type: boolean
      required:
      - email
      - get_avatar
      - id
    UserPagination:
      type: object
      properties:
        pageCourante:
          type: integer
        totalPages:
          type: integer
        totalElements:
          type: integer
        pages:
          type: array
          items:
            $ref: '#/components/schemas/User'
      required:
      - pageCourante
      - pages
      - totalElements
      - totalPages
  securitySchemes:
    jwtAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
